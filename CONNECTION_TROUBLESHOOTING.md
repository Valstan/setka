# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ SETKA

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

**–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ:**
- ‚úÖ FastAPI —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000
- ‚úÖ Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 80
- ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ HTTP

---

## üåê –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–∞–π—Ç—É

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:
```
http://3931b3fe50ab.vps.myjino.ru
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **HTTP** (–Ω–µ HTTPS), —Ç–∞–∫ –∫–∞–∫ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

---

## üîç –ï—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å:
- ‚úÖ `http://3931b3fe50ab.vps.myjino.ru`
- ‚ùå `https://3931b3fe50ab.vps.myjino.ru` (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)
- ‚ùå `http://3931b3fe50ab.vps.myjino.ru:8000` (–Ω–µ –Ω—É–∂–µ–Ω –ø–æ—Ä—Ç)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –ø–æ IP –∞–¥—Ä–µ—Å—É:
```
http://10.100.32.97
```

–ï—Å–ª–∏ –ø–æ IP —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ –ø–æ –¥–æ–º–µ–Ω—É –Ω–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ —Å DNS.

### 3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

- –ù–∞–∂–º–∏—Ç–µ `Ctrl+Shift+Delete` (–∏–ª–∏ `Cmd+Shift+Delete` –Ω–∞ Mac)
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ cookies
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π—Ä–≤–æ–ª –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç 80:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
sudo ufw status
sudo iptables -L -n | grep 80
```

### 5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä

–ò–Ω–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
- Chrome
- Firefox
- Edge
- Safari

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/—Å–µ—Ç–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ - –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–µ—Ç–∏ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

---

## üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
cd /home/valstan/SETKA
bash scripts/diagnose_connection.sh
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ FastAPI:
```bash
curl http://localhost:8000/api/health/
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy","service":"SETKA"}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx:
```bash
sudo systemctl status nginx
curl http://localhost/api/health/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
```bash
curl http://3931b3fe50ab.vps.myjino.ru/api/health/
```

---

## üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ FastAPI:
```bash
cd /home/valstan/SETKA
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep uvicorn

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–∑–∞–º–µ–Ω–∏—Ç–µ PID)
kill <PID>

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
source venv/bin/activate
nohup uvicorn main:app --host 127.0.0.1 --port 8000 --workers 1 > logs/uvicorn.log 2>&1 &
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx:
```bash
sudo systemctl restart nginx
sudo systemctl status nginx
```

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** $(date)

**–°—Ç–∞—Ç—É—Å:**
- FastAPI: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (PID 337, —Ä–∞–±–æ—Ç–∞–µ—Ç 27 –¥–Ω–µ–π)
- Nginx: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ—Ä—Ç 8000: ‚úÖ –û—Ç–∫—Ä—ã—Ç
- –ü–æ—Ä—Ç 80: ‚úÖ –û—Ç–∫—Ä—ã—Ç
- HTTP –¥–æ—Å—Ç—É–ø: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- HTTPS –¥–æ—Å—Ç—É–ø: ‚ö†Ô∏è –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üí° –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∏—Å—Ç–µ–∫–ª–æ"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. DNS –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è
3. –§–∞–π—Ä–≤–æ–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç
4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ IP: `http://10.100.32.97`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: `nslookup 3931b3fe50ab.vps.myjino.ru`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π DNS (8.8.8.8)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "ERR_CONNECTION_REFUSED"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. FastAPI –Ω–µ –∑–∞–ø—É—â–µ–Ω
2. Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω
3. –ü–æ—Ä—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã: `ps aux | grep uvicorn`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã (—Å–º. –≤—ã—à–µ)

### –ü—Ä–æ–±–ª–µ–º–∞: "ERR_SSL_PROTOCOL_ERROR"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—ã—Ç–∞–µ—Ç–µ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ HTTPS, –Ω–æ SSL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP –≤–º–µ—Å—Ç–æ HTTPS

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
tail -50 /home/valstan/SETKA/logs/app.log
sudo tail -50 /var/log/nginx/error.log
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å:
```bash
ping 3931b3fe50ab.vps.myjino.ru
traceroute 3931b3fe50ab.vps.myjino.ru
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤:
```bash
telnet 3931b3fe50ab.vps.myjino.ru 80
```

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: $(date)*

